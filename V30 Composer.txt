(defsymphony
 "Copy of [PineScript V1] TD_SHARE. Borg Collective V30 (sans block3) w/o TLT w/o SELECT w/o Inverse VOL."
 {:asset-class "EQUITIES", :rebalance-frequency :daily}
 (weight-equal
  [(group
    "PineScript Tradingview V1 Version"
    [(weight-equal
      [(weight-specified
        0.7857
        (group
         "Block 1 & 2: Market overbought frontrunners, and then core algos (w shorting and VIXM) This is the most aggressive and directional block, but still modest and without leverage. Switches between QQQ and BIL"
         [(weight-equal
           [(if
             (> (rsi "SPY" {:window 10}) 80)
             [(group
               "10 day RSI says we're over bought, so a pullback is likely. Switch to a mild hedge, the market can stay overbought for a long time, so don't short the market. You can just use BIL to be super conservative"
               [(weight-equal
                 [(asset "SHV" nil)
                  (if
                   (< (rsi "VIXM" {:window 20}) 50)
                   [(asset
                     "VIXM"
                     "ProShares VIX Mid-Term Futures ETF")]
                   [(asset
                     "SHV"
                     "iShares Short Treasury Bond ETF")])])])]
             [(weight-equal
               [(if
                 (> (rsi "IOO" {:window 10}) 79)
                 [(group
                   "10 day RSI says we're over bought, so a pullback is likely. Switch to a mild hedge, the market can stay overbought for a long time, so don't short the market. You can just use BIL to be super conservative"
                   [(weight-equal
                     [(asset "SHV" nil)
                      (if
                       (< (rsi "VIXM" {:window 20}) 50)
                       [(asset
                         "VIXM"
                         "ProShares VIX Mid-Term Futures ETF")]
                       [(asset
                         "SHV"
                         "iShares Short Treasury Bond ETF")])])])]
                 [(weight-equal
                   [(if
                     (> (rsi "QQQ" {:window 10}) 79)
                     [(group
                       "10 day RSI says we're over bought, so a pullback is likely. Switch to a mild hedge, the market can stay overbought for a long time, so don't short the market. You can just use BIL to be super conservative"
                       [(weight-equal
                         [(asset "SHV" nil)
                          (if
                           (< (rsi "VIXM" {:window 20}) 50)
                           [(asset
                             "VIXM"
                             "ProShares VIX Mid-Term Futures ETF")]
                           [(asset
                             "SHV"
                             "iShares Short Treasury Bond ETF")])])])]
                     [(weight-equal
                       [(if
                         (> (rsi "VTV" {:window 10}) 78)
                         [(group
                           "10 day RSI says we're over bought, so a pullback is likely. Switch to a mild hedge, the market can stay overbought for a long time, so don't short the market. You can just use BIL to be super conservative"
                           [(weight-equal
                             [(asset "PSQ" "ProShares Short QQQ")
                              (if
                               (< (rsi "VIXM" {:window 20}) 50)
                               [(asset
                                 "VIXM"
                                 "ProShares VIX Mid-Term Futures ETF")]
                               [(asset
                                 "SHV"
                                 "iShares Short Treasury Bond ETF")])])])]
                         [(weight-equal
                           [(if
                             (> (rsi "XLF" {:window 10}) 80)
                             [(group
                               "10 day RSI says we're over bought, so a pullback is likely. Switch to a mild hedge, the market can stay overbought for a long time, so don't short the market. You can just use BIL to be super conservative"
                               [(weight-equal
                                 [(asset "SHV" nil)
                                  (if
                                   (< (rsi "VIXM" {:window 20}) 50)
                                   [(asset
                                     "VIXM"
                                     "ProShares VIX Mid-Term Futures ETF")]
                                   [(asset
                                     "SHV"
                                     "iShares Short Treasury Bond ETF")])])])]
                             [(weight-equal
                               [(if
                                 (> (rsi "XLP" {:window 10}) 76)
                                 [(group
                                   "10 day RSI says we're over bought, so a pullback is likely. Switch to a mild hedge, the market can stay overbought for a long time, so don't short the market. You can just use BIL to be super conservative"
                                   [(weight-equal
                                     [(asset
                                       "PSQ"
                                       "ProShares Short QQQ")
                                      (if
                                       (< (rsi "VIXM" {:window 20}) 50)
                                       [(asset
                                         "VIXM"
                                         "ProShares VIX Mid-Term Futures ETF")]
                                       [(asset
                                         "SHV"
                                         "iShares Short Treasury Bond ETF")])])])]
                                 [(weight-equal
                                   [(group
                                     "Main tactical algos assimilated by the Borg"
                                     [(weight-equal
                                       [(group
                                         "QQQ|TLT Algos. Sized such that max allocation to QQQ is ~50%"
                                         [(weight-specified
                                           0.8181999999999999
                                           (group
                                            "Block 1 & 2 Enhanced"
                                            [(weight-equal
                                              [(group
                                                "Just Run This - simplified 11/11/24"
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (current-price
                                                      "SPY")
                                                     (moving-average-price
                                                      "SPY"
                                                      {:window 200}))
                                                    [(weight-equal
                                                      [(group
                                                        "QQQ"
                                                        [(weight-equal
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")])])])]
                                                    [(weight-equal
                                                      [(group
                                                        "Bear"
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (cumulative-return
                                                              "QQQ"
                                                              {:window
                                                               60})
                                                             -12)
                                                            [(weight-equal
                                                              [(asset
                                                                "SHV"
                                                                "iShares Short Treasury Bond ETF")
                                                               (asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")])]
                                                            [(weight-equal
                                                              [(if
                                                                (>
                                                                 (current-price
                                                                  "TQQQ")
                                                                 (moving-average-price
                                                                  "TQQQ"
                                                                  {:window
                                                                   20}))
                                                                [(weight-equal
                                                                  [(asset
                                                                    "QQQ"
                                                                    "Invesco QQQ Trust Series I")])]
                                                                [(weight-equal
                                                                  [(if
                                                                    (<
                                                                     (rsi
                                                                      "QQQ"
                                                                      {:window
                                                                       10})
                                                                     32.5)
                                                                    [(asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")]
                                                                    [(asset
                                                                      "PSQ"
                                                                      "ProShares Short QQQ")])])])])])])])])])])])
                                               (group
                                                "1999 FTLT w 100d MA macro filter"
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (current-price
                                                      "SPY")
                                                     (moving-average-price
                                                      "SPY"
                                                      {:window 100}))
                                                    [(group
                                                      "Bull"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "QQQ")
                                                           (moving-average-price
                                                            "QQQ"
                                                            {:window
                                                             25}))
                                                          [(asset
                                                            "QQQ"
                                                            nil)]
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (cumulative-return
                                                                "QQQ"
                                                                {:window
                                                                 20})
                                                               (moving-average-return
                                                                "QQQ"
                                                                {:window
                                                                 10}))
                                                              [(asset
                                                                "QQQ"
                                                                nil)]
                                                              [(weight-equal
                                                                [(if
                                                                  (>
                                                                   (cumulative-return
                                                                    "AGG"
                                                                    {:window
                                                                     60})
                                                                   (cumulative-return
                                                                    "SHV"
                                                                    {:window
                                                                     60}))
                                                                  [(asset
                                                                    "QQQ"
                                                                    "Invesco QQQ Trust Series I")]
                                                                  [(weight-equal
                                                                    [(if
                                                                      (>
                                                                       (cumulative-return
                                                                        "VWO"
                                                                        {:window
                                                                         60})
                                                                       (cumulative-return
                                                                        "SHV"
                                                                        {:window
                                                                         60}))
                                                                      [(asset
                                                                        "QQQ"
                                                                        "Invesco QQQ Trust Series I")]
                                                                      [(weight-equal
                                                                        [(group
                                                                          "IEF vs PSQ => SHV or PSQ"
                                                                          [(weight-equal
                                                                            [(if
                                                                              (>
                                                                               (rsi
                                                                                "IEF"
                                                                                {:window
                                                                                 7})
                                                                               (rsi
                                                                                "PSQ"
                                                                                {:window
                                                                                 20}))
                                                                              [(asset
                                                                                "SHV"
                                                                                "iShares Short Treasury Bond ETF")]
                                                                              [(weight-equal
                                                                                [(if
                                                                                  (<
                                                                                   (rsi
                                                                                    "QQQ"
                                                                                    {:window
                                                                                     10})
                                                                                   32.5)
                                                                                  [(asset
                                                                                    "SHV"
                                                                                    "iShares Short Treasury Bond ETF")]
                                                                                  [(asset
                                                                                    "PSQ"
                                                                                    "ProShares Short QQQ")])])])])])])])])])])])])])])])]
                                                    [(group
                                                      "Bear"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "QQQ")
                                                           (moving-average-price
                                                            "QQQ"
                                                            {:window
                                                             25}))
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (cumulative-return
                                                                "QQQ"
                                                                {:window
                                                                 10})
                                                               5)
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(asset
                                                                    "SHV"
                                                                    "iShares Short Treasury Bond ETF")]
                                                                  [(asset
                                                                    "PSQ"
                                                                    "ProShares Short QQQ")])])]
                                                              [(asset
                                                                "QQQ"
                                                                nil)])])]
                                                          [(asset
                                                            "SHV"
                                                            "iShares Short Treasury Bond ETF")])])])])])])
                                               (group
                                                "LBT FTLT/Bull/Bonds with XLU/XLK RSI filter"
                                                [(weight-equal
                                                  [(if
                                                    (<
                                                     (rsi
                                                      "XLU"
                                                      {:window 126})
                                                     (rsi
                                                      "XLK"
                                                      {:window 126}))
                                                    [(group
                                                      "Compares"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (rsi
                                                            "AGG"
                                                            {:window
                                                             20})
                                                           (rsi
                                                            "SH"
                                                            {:window
                                                             60}))
                                                          [(weight-equal
                                                            [(asset
                                                              "QQQ"
                                                              "Invesco QQQ Trust Series I")])]
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (rsi
                                                                "AGG"
                                                                {:window
                                                                 21})
                                                               (rsi
                                                                "SPY"
                                                                {:window
                                                                 21}))
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")])]
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(asset
                                                                    "SHV"
                                                                    "iShares Short Treasury Bond ETF")]
                                                                  [(asset
                                                                    "PSQ"
                                                                    "ProShares Short QQQ")])])])])])])])]
                                                    [(weight-equal
                                                      [(if
                                                        (<
                                                         (rsi
                                                          "TLT"
                                                          {:window
                                                           126})
                                                         50)
                                                        [(group
                                                          "20/60"
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (rsi
                                                                "AGG"
                                                                {:window
                                                                 20})
                                                               (rsi
                                                                "SH"
                                                                {:window
                                                                 60}))
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")])]
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(asset
                                                                    "SHV"
                                                                    "iShares Short Treasury Bond ETF")]
                                                                  [(asset
                                                                    "PSQ"
                                                                    "ProShares Short QQQ")])])])])])]
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (rsi
                                                              "QQQ"
                                                              {:window
                                                               10})
                                                             32.5)
                                                            [(asset
                                                              "SHV"
                                                              "iShares Short Treasury Bond ETF")]
                                                            [(asset
                                                              "PSQ"
                                                              "ProShares Short QQQ")])])])])])])])
                                               (group
                                                "20/60 Machine - with 200d MA macro filter"
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (current-price
                                                      "SPY")
                                                     (moving-average-price
                                                      "SPY"
                                                      {:window 200}))
                                                    [(group
                                                      "20/60"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (rsi
                                                            "AGG"
                                                            {:window
                                                             20})
                                                           (rsi
                                                            "SH"
                                                            {:window
                                                             60}))
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")]
                                                          [(weight-equal
                                                            [(if
                                                              (<
                                                               (rsi
                                                                "QQQ"
                                                                {:window
                                                                 10})
                                                               32.5)
                                                              [(asset
                                                                "SHV"
                                                                "iShares Short Treasury Bond ETF")]
                                                              [(asset
                                                                "PSQ"
                                                                "ProShares Short QQQ")])])])])])]
                                                    [(group
                                                      "Bear"
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (cumulative-return
                                                            "QQQ"
                                                            {:window
                                                             60})
                                                           -11)
                                                          [(group
                                                            "we're in a big drawdown of QQQ: BND vs QQQ"
                                                            [(weight-equal
                                                              [(if
                                                                (>
                                                                 (rsi
                                                                  "AGG"
                                                                  {:window
                                                                   10})
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10}))
                                                                [(group
                                                                  "QQQ"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "QQQ"
                                                                      "Invesco QQQ Trust Series I")])])]
                                                                [(weight-equal
                                                                  [(if
                                                                    (<
                                                                     (rsi
                                                                      "QQQ"
                                                                      {:window
                                                                       10})
                                                                     32.5)
                                                                    [(asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")]
                                                                    [(asset
                                                                      "PSQ"
                                                                      "ProShares Short QQQ")])])])])])]
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (current-price
                                                                "QQQ")
                                                               (moving-average-price
                                                                "QQQ"
                                                                {:window
                                                                 20}))
                                                              [(weight-equal
                                                                [(group
                                                                  "TLT vs PSQ"
                                                                  [(weight-equal
                                                                    [(if
                                                                      (>
                                                                       (rsi
                                                                        "TLT"
                                                                        {:window
                                                                         21})
                                                                       (rsi
                                                                        "PSQ"
                                                                        {:window
                                                                         21}))
                                                                      [(group
                                                                        "QQQ"
                                                                        [(weight-equal
                                                                          [(asset
                                                                            "QQQ"
                                                                            "Invesco QQQ Trust Series I")])])]
                                                                      [(weight-equal
                                                                        [(if
                                                                          (<
                                                                           (rsi
                                                                            "QQQ"
                                                                            {:window
                                                                             10})
                                                                           32.5)
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")]
                                                                          [(asset
                                                                            "PSQ"
                                                                            "ProShares Short QQQ")])])])])])])]
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(asset
                                                                    "SHV"
                                                                    "iShares Short Treasury Bond ETF")]
                                                                  [(asset
                                                                    "PSQ"
                                                                    "ProShares Short QQQ")])])])])])])])])])])
                                               (group
                                                "KMLM Variants"
                                                [(weight-equal
                                                  [(group
                                                    "SPY vs KMLM -> 20d"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "SPY"
                                                          {:window 10})
                                                         (rsi
                                                          "KMLM"
                                                          {:window
                                                           10}))
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")]
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (current-price
                                                              "KMLM")
                                                             (moving-average-price
                                                              "KMLM"
                                                              {:window
                                                               20}))
                                                            [(asset
                                                              "QQQ"
                                                              "Invesco QQQ Trust Series I")]
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])])])])])])
                                                   (group
                                                    "XLK vs KMLM -> 20d"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "XLK"
                                                          {:window 10})
                                                         (rsi
                                                          "KMLM"
                                                          {:window
                                                           10}))
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")]
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (current-price
                                                              "KMLM")
                                                             (moving-average-price
                                                              "KMLM"
                                                              {:window
                                                               20}))
                                                            [(asset
                                                              "QQQ"
                                                              "Invesco QQQ Trust Series I")]
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])])])])])])
                                                   (group
                                                    "SMH vs KMLM -> 20d"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "SMH"
                                                          {:window 10})
                                                         (rsi
                                                          "KMLM"
                                                          {:window
                                                           10}))
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")]
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (current-price
                                                              "KMLM")
                                                             (moving-average-price
                                                              "KMLM"
                                                              {:window
                                                               20}))
                                                            [(asset
                                                              "QQQ"
                                                              "Invesco QQQ Trust Series I")]
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])])])])])])
                                                   (group
                                                    "HYD vs KMLM"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "HYD"
                                                          {:window 10})
                                                         (rsi
                                                          "KMLM"
                                                          {:window
                                                           10}))
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")]
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (rsi
                                                              "QQQ"
                                                              {:window
                                                               10})
                                                             32.5)
                                                            [(asset
                                                              "SHV"
                                                              "iShares Short Treasury Bond ETF")]
                                                            [(asset
                                                              "PSQ"
                                                              "ProShares Short QQQ")])])])])])])])
                                               (group
                                                "200d FDN vs 200d XLU | 2007-07-05"
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (rsi
                                                      "FDN"
                                                      {:window 200})
                                                     (rsi
                                                      "XLU"
                                                      {:window 200}))
                                                    [(asset
                                                      "QQQ"
                                                      "Invesco QQQ Trust Series I")]
                                                    [(weight-equal
                                                      [(group
                                                        "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "SPY")
                                                             (moving-average-price
                                                              "SPY"
                                                              {:window
                                                               200}))
                                                            [(weight-equal
                                                              [(group
                                                                "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       10})
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       50}))
                                                                    [(asset
                                                                      "SHV"
                                                                      nil)]
                                                                    [(group
                                                                      "TLT isn't performing, how about Gold?"
                                                                      [(weight-equal
                                                                        [(if
                                                                          (>
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             20})
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             250}))
                                                                          [(asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")]
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])]
                                                            [(group
                                                              "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(group
                                                                    "ease up on the shorting as we're over sold"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])]
                                                                  [(group
                                                                    "Cum. Returns deleted"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "PSQ"
                                                                        "ProShares Short QQQ")
                                                                       (asset
                                                                        "GLD"
                                                                        "SPDR Gold Shares")
                                                                       (asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])])])])])])])])])])])
                                               (group
                                                "VWO momentum"
                                                [(weight-equal
                                                  [(group
                                                    "126d momentum vs VWO"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (cumulative-return
                                                          "VWO"
                                                          {:window
                                                           126})
                                                         (cumulative-return
                                                          "SHV"
                                                          {:window
                                                           126}))
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "VWO")
                                                             (moving-average-price
                                                              "VWO"
                                                              {:window
                                                               126}))
                                                            [(group
                                                              "bullish"
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")])])]
                                                            [(group
                                                              " balanced"
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")
                                                                 (asset
                                                                  "SHV"
                                                                  nil)])])])])]
                                                        [(group
                                                          "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (current-price
                                                                "SPY")
                                                               (moving-average-price
                                                                "SPY"
                                                                {:window
                                                                 200}))
                                                              [(weight-equal
                                                                [(group
                                                                  "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                  [(weight-equal
                                                                    [(if
                                                                      (>
                                                                       (moving-average-price
                                                                        "TLT"
                                                                        {:window
                                                                         10})
                                                                       (moving-average-price
                                                                        "TLT"
                                                                        {:window
                                                                         50}))
                                                                      [(asset
                                                                        "SHV"
                                                                        nil)]
                                                                      [(group
                                                                        "TLT isn't performing, how about Gold?"
                                                                        [(weight-equal
                                                                          [(if
                                                                            (>
                                                                             (moving-average-price
                                                                              "GLD"
                                                                              {:window
                                                                               20})
                                                                             (moving-average-price
                                                                              "GLD"
                                                                              {:window
                                                                               250}))
                                                                            [(asset
                                                                              "GLD"
                                                                              "SPDR Gold Shares")]
                                                                            [(asset
                                                                              "SHV"
                                                                              "iShares Short Treasury Bond ETF")])])])])])])])]
                                                              [(group
                                                                "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                                [(weight-equal
                                                                  [(if
                                                                    (<
                                                                     (rsi
                                                                      "QQQ"
                                                                      {:window
                                                                       10})
                                                                     32.5)
                                                                    [(group
                                                                      "ease up on the shorting as we're over sold"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])]
                                                                    [(group
                                                                      "Cum. Returns deleted"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "PSQ"
                                                                          "ProShares Short QQQ")
                                                                         (asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")
                                                                         (asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])])])])])
                                                   (group
                                                    "63d momentum vs VWO"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (cumulative-return
                                                          "VWO"
                                                          {:window 63})
                                                         (cumulative-return
                                                          "SHV"
                                                          {:window
                                                           63}))
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "VWO")
                                                             (moving-average-price
                                                              "VWO"
                                                              {:window
                                                               63}))
                                                            [(group
                                                              "bullish"
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")])])]
                                                            [(group
                                                              " balanced"
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")
                                                                 (asset
                                                                  "SHV"
                                                                  nil)])])])])]
                                                        [(group
                                                          "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (current-price
                                                                "SPY")
                                                               (moving-average-price
                                                                "SPY"
                                                                {:window
                                                                 200}))
                                                              [(weight-equal
                                                                [(group
                                                                  "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                  [(weight-equal
                                                                    [(if
                                                                      (>
                                                                       (moving-average-price
                                                                        "TLT"
                                                                        {:window
                                                                         10})
                                                                       (moving-average-price
                                                                        "TLT"
                                                                        {:window
                                                                         50}))
                                                                      [(asset
                                                                        "SHV"
                                                                        nil)]
                                                                      [(group
                                                                        "TLT isn't performing, how about Gold?"
                                                                        [(weight-equal
                                                                          [(if
                                                                            (>
                                                                             (moving-average-price
                                                                              "GLD"
                                                                              {:window
                                                                               20})
                                                                             (moving-average-price
                                                                              "GLD"
                                                                              {:window
                                                                               250}))
                                                                            [(asset
                                                                              "GLD"
                                                                              "SPDR Gold Shares")]
                                                                            [(asset
                                                                              "SHV"
                                                                              "iShares Short Treasury Bond ETF")])])])])])])])]
                                                              [(group
                                                                "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                                [(weight-equal
                                                                  [(if
                                                                    (<
                                                                     (rsi
                                                                      "QQQ"
                                                                      {:window
                                                                       10})
                                                                     32.5)
                                                                    [(group
                                                                      "ease up on the shorting as we're over sold"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])]
                                                                    [(group
                                                                      "Cum. Returns deleted"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "PSQ"
                                                                          "ProShares Short QQQ")
                                                                         (asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")
                                                                         (asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])])])])])])])
                                               (group
                                                "60d BND vs 60d BIL "
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (cumulative-return
                                                      "BND"
                                                      {:window 60})
                                                     (cumulative-return
                                                      "SHV"
                                                      {:window 60}))
                                                    [(group
                                                      "bullish but balanced"
                                                      [(weight-equal
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")])])]
                                                    [(weight-equal
                                                      [(group
                                                        "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "SPY")
                                                             (moving-average-price
                                                              "SPY"
                                                              {:window
                                                               200}))
                                                            [(weight-equal
                                                              [(group
                                                                "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       10})
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       50}))
                                                                    [(asset
                                                                      "SHV"
                                                                      nil)]
                                                                    [(group
                                                                      "TLT isn't performing, how about Gold?"
                                                                      [(weight-equal
                                                                        [(if
                                                                          (>
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             20})
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             250}))
                                                                          [(asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")]
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])]
                                                            [(group
                                                              "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(group
                                                                    "ease up on the shorting as we're over sold"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])]
                                                                  [(group
                                                                    "Cum. Returns deleted"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "PSQ"
                                                                        "ProShares Short QQQ")
                                                                       (asset
                                                                        "GLD"
                                                                        "SPDR Gold Shares")
                                                                       (asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])])])])])])])])])])])
                                               (group
                                                "20/60 -> 10/20"
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (rsi
                                                      "AGG"
                                                      {:window 20})
                                                     (rsi
                                                      "SH"
                                                      {:window 60}))
                                                    [(group
                                                      "bullish but balanced"
                                                      [(weight-equal
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")])])]
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "IEF"
                                                          {:window 10})
                                                         (rsi
                                                          "PSQ"
                                                          {:window
                                                           20}))
                                                        [(group
                                                          "bullish but balanced"
                                                          [(weight-equal
                                                            [(asset
                                                              "QQQ"
                                                              "Invesco QQQ Trust Series I")])])]
                                                        [(weight-equal
                                                          [(group
                                                            "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                            [(weight-equal
                                                              [(if
                                                                (>
                                                                 (current-price
                                                                  "SPY")
                                                                 (moving-average-price
                                                                  "SPY"
                                                                  {:window
                                                                   200}))
                                                                [(weight-equal
                                                                  [(group
                                                                    "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                    [(weight-equal
                                                                      [(if
                                                                        (>
                                                                         (moving-average-price
                                                                          "TLT"
                                                                          {:window
                                                                           10})
                                                                         (moving-average-price
                                                                          "TLT"
                                                                          {:window
                                                                           50}))
                                                                        [(asset
                                                                          "SHV"
                                                                          nil)]
                                                                        [(group
                                                                          "TLT isn't performing, how about Gold?"
                                                                          [(weight-equal
                                                                            [(if
                                                                              (>
                                                                               (moving-average-price
                                                                                "GLD"
                                                                                {:window
                                                                                 20})
                                                                               (moving-average-price
                                                                                "GLD"
                                                                                {:window
                                                                                 250}))
                                                                              [(asset
                                                                                "GLD"
                                                                                "SPDR Gold Shares")]
                                                                              [(asset
                                                                                "SHV"
                                                                                "iShares Short Treasury Bond ETF")])])])])])])])]
                                                                [(group
                                                                  "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                                  [(weight-equal
                                                                    [(if
                                                                      (<
                                                                       (rsi
                                                                        "QQQ"
                                                                        {:window
                                                                         10})
                                                                       32.5)
                                                                      [(group
                                                                        "ease up on the shorting as we're over sold"
                                                                        [(weight-equal
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])]
                                                                      [(group
                                                                        "Cum. Returns deleted"
                                                                        [(weight-equal
                                                                          [(asset
                                                                            "PSQ"
                                                                            "ProShares Short QQQ")
                                                                           (asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")
                                                                           (asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])])])])])])])])
                                               (group
                                                "20d AGG vs 60d SH "
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (rsi
                                                      "AGG"
                                                      {:window 20})
                                                     (rsi
                                                      "SH"
                                                      {:window 60}))
                                                    [(group
                                                      "bullish but balanced"
                                                      [(weight-equal
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")])])]
                                                    [(weight-equal
                                                      [(group
                                                        "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "SPY")
                                                             (moving-average-price
                                                              "SPY"
                                                              {:window
                                                               200}))
                                                            [(weight-equal
                                                              [(group
                                                                "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       10})
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       50}))
                                                                    [(asset
                                                                      "SHV"
                                                                      nil)]
                                                                    [(group
                                                                      "TLT isn't performing, how about Gold?"
                                                                      [(weight-equal
                                                                        [(if
                                                                          (>
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             20})
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             250}))
                                                                          [(asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")]
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])]
                                                            [(group
                                                              "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(group
                                                                    "ease up on the shorting as we're over sold"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])]
                                                                  [(group
                                                                    "Cum. Returns deleted"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "PSQ"
                                                                        "ProShares Short QQQ")
                                                                       (asset
                                                                        "GLD"
                                                                        "SPDR Gold Shares")
                                                                       (asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])])])])])])])])])])])
                                               (group
                                                "20d TLT vs 20d PSQ "
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (rsi
                                                      "TLT"
                                                      {:window 20})
                                                     (rsi
                                                      "PSQ"
                                                      {:window 20}))
                                                    [(group
                                                      "bullish but balanced"
                                                      [(weight-equal
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")])])]
                                                    [(weight-equal
                                                      [(group
                                                        "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "SPY")
                                                             (moving-average-price
                                                              "SPY"
                                                              {:window
                                                               200}))
                                                            [(weight-equal
                                                              [(group
                                                                "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       10})
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       50}))
                                                                    [(asset
                                                                      "SHV"
                                                                      nil)]
                                                                    [(group
                                                                      "TLT isn't performing, how about Gold?"
                                                                      [(weight-equal
                                                                        [(if
                                                                          (>
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             20})
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             250}))
                                                                          [(asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")]
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])]
                                                            [(group
                                                              "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(group
                                                                    "ease up on the shorting as we're over sold"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])]
                                                                  [(group
                                                                    "Cum. Returns deleted"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "PSQ"
                                                                        "ProShares Short QQQ")
                                                                       (asset
                                                                        "GLD"
                                                                        "SPDR Gold Shares")
                                                                       (asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])])])])])])])])])])])])])
                                           0.1818
                                           (group
                                            "EEM Algo"
                                            [(weight-equal
                                              [(if
                                                (>
                                                 (current-price "SHV")
                                                 (moving-average-price
                                                  "SHV"
                                                  {:window 50}))
                                                [(weight-equal
                                                  [(if
                                                    (>
                                                     (current-price
                                                      "EEM")
                                                     (moving-average-price
                                                      "EEM"
                                                      {:window 200}))
                                                    [(group
                                                      "IEI vs IWM"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (rsi
                                                            "IEI"
                                                            {:window
                                                             10})
                                                           (rsi
                                                            "IWM"
                                                            {:window
                                                             15}))
                                                          [(asset
                                                            "EEM"
                                                            nil)]
                                                          [(asset
                                                            "SHV"
                                                            nil)])])])]
                                                    [(group
                                                      "IGIB vs EEM"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (rsi
                                                            "IGIB"
                                                            {:window
                                                             15})
                                                           (rsi
                                                            "EEM"
                                                            {:window
                                                             15}))
                                                          [(asset
                                                            "EEM"
                                                            nil)]
                                                          [(asset
                                                            "SHV"
                                                            nil)])])])
                                                     (group
                                                      "IGIB vs SPY"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (rsi
                                                            "IGIB"
                                                            {:window
                                                             10})
                                                           (rsi
                                                            "SPY"
                                                            {:window
                                                             10}))
                                                          [(asset
                                                            "EEM"
                                                            nil)]
                                                          [(asset
                                                            "SHV"
                                                            nil)])])])])])]
                                                [(group
                                                  "IGIB vs SPY"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (rsi
                                                        "IGIB"
                                                        {:window 10})
                                                       (rsi
                                                        "SPY"
                                                        {:window 10}))
                                                      [(asset
                                                        "EEM"
                                                        nil)]
                                                      [(asset
                                                        "SHV"
                                                        nil)])])])])])]))])])])])])])])])])])])])])])])])])
        0.2143
        (group
         "Moderate BSH V2 (Block 2 with KMLM Variant)"
         [(weight-equal
           [(if
             (> (rsi "VIXY" {:window 10}) 85)
             [(group
               "If you get here, then most likely we're already in VIXM, and the crash is in full flight, so now we really want to book profits. Hopefully we can hold it, so rotate out of VIXM"
               [(weight-equal
                 [(group
                   "vol really high we should scale out of VIXM"
                   [(weight-equal
                     [(asset
                       "SHV"
                       "iShares Short Treasury Bond ETF")])])])])]
             [(weight-equal
               [(group
                 "Scale into and out of VIXM as volatility rises, we test from high to low vol below"
                 [(weight-equal
                   [(if
                     (> (rsi "VIXM" {:window 10}) 80)
                     [(weight-equal
                       [(group
                         "vol really high we should scale out of VIXM"
                         [(weight-equal
                           [(asset
                             "SHV"
                             "iShares Short Treasury Bond ETF")
                            (asset
                             "VIXM"
                             "ProShares VIX Mid-Term Futures ETF")])])])]
                     [(weight-equal
                       [(if
                         (> (rsi "VIXM" {:window 10}) 75)
                         [(weight-equal
                           [(group
                             "High Vol go to full allocation to VIXM"
                             [(weight-equal
                               [(asset
                                 "VIXM"
                                 "ProShares VIX Mid-Term Futures ETF")])])])]
                         [(weight-equal
                           [(if
                             (> (rsi "VIXM" {:window 10}) 72.5)
                             [(weight-equal
                               [(group
                                 "Med-High Vol,  go more VIXM"
                                 [(weight-equal
                                   [(asset
                                     "VIXM"
                                     "ProShares VIX Mid-Term Futures ETF")
                                    (asset
                                     "SHV"
                                     "iShares Short Treasury Bond ETF")])])])]
                             [(weight-equal
                               [(if
                                 (> (rsi "VIXM" {:window 10}) 70)
                                 [(weight-equal
                                   [(group
                                     "Low-High Vol go to mild allocation to VIXM"
                                     [(weight-specified
                                       0.25
                                       (asset
                                        "VIXM"
                                        "ProShares VIX Mid-Term Futures ETF")
                                       0.75
                                       (asset
                                        "SHV"
                                        "iShares Short Treasury Bond ETF"))])])]
                                 [(weight-equal
                                   [(group
                                     "Normal Path: cautious bullishness, and we may lace in some VIXM, we can moderate how much VIXM we get by adding more bullish entries to the inverse vol weighting. If you want a stronger hedge then run with a 1:1 ratio of VIXM to Bull algo below"
                                     [(weight-equal
                                       [(weight-specified
                                         0.2
                                         (group
                                          "Moderated VIXM"
                                          [(weight-equal
                                            [(asset
                                              "VIXM"
                                              "ProShares VIX Mid-Term Futures ETF")])])
                                         0.8
                                         (group
                                          "Block 1 & 2 Enhanced"
                                          [(weight-equal
                                            [(group
                                              "Just Run This - simplified 11/11/24"
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (current-price
                                                    "SPY")
                                                   (moving-average-price
                                                    "SPY"
                                                    {:window 200}))
                                                  [(weight-equal
                                                    [(group
                                                      "QQQ"
                                                      [(weight-equal
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")])])])]
                                                  [(weight-equal
                                                    [(group
                                                      "Bear"
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (cumulative-return
                                                            "QQQ"
                                                            {:window
                                                             60})
                                                           -12)
                                                          [(weight-equal
                                                            [(asset
                                                              "SHV"
                                                              "iShares Short Treasury Bond ETF")
                                                             (asset
                                                              "QQQ"
                                                              "Invesco QQQ Trust Series I")])]
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (current-price
                                                                "TQQQ")
                                                               (moving-average-price
                                                                "TQQQ"
                                                                {:window
                                                                 20}))
                                                              [(weight-equal
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")])]
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(asset
                                                                    "SHV"
                                                                    "iShares Short Treasury Bond ETF")]
                                                                  [(asset
                                                                    "PSQ"
                                                                    "ProShares Short QQQ")])])])])])])])])])])])
                                             (group
                                              "1999 FTLT w 100d MA macro filter"
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (current-price
                                                    "SPY")
                                                   (moving-average-price
                                                    "SPY"
                                                    {:window 100}))
                                                  [(group
                                                    "Bull"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (current-price
                                                          "QQQ")
                                                         (moving-average-price
                                                          "QQQ"
                                                          {:window
                                                           25}))
                                                        [(asset
                                                          "QQQ"
                                                          nil)]
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (cumulative-return
                                                              "QQQ"
                                                              {:window
                                                               20})
                                                             (moving-average-return
                                                              "QQQ"
                                                              {:window
                                                               10}))
                                                            [(asset
                                                              "QQQ"
                                                              nil)]
                                                            [(weight-equal
                                                              [(if
                                                                (>
                                                                 (cumulative-return
                                                                  "AGG"
                                                                  {:window
                                                                   60})
                                                                 (cumulative-return
                                                                  "SHV"
                                                                  {:window
                                                                   60}))
                                                                [(asset
                                                                  "QQQ"
                                                                  "Invesco QQQ Trust Series I")]
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (cumulative-return
                                                                      "VWO"
                                                                      {:window
                                                                       60})
                                                                     (cumulative-return
                                                                      "SHV"
                                                                      {:window
                                                                       60}))
                                                                    [(asset
                                                                      "QQQ"
                                                                      "Invesco QQQ Trust Series I")]
                                                                    [(weight-equal
                                                                      [(group
                                                                        "IEF vs PSQ => SHV or PSQ"
                                                                        [(weight-equal
                                                                          [(if
                                                                            (>
                                                                             (rsi
                                                                              "IEF"
                                                                              {:window
                                                                               7})
                                                                             (rsi
                                                                              "PSQ"
                                                                              {:window
                                                                               20}))
                                                                            [(asset
                                                                              "SHV"
                                                                              "iShares Short Treasury Bond ETF")]
                                                                            [(weight-equal
                                                                              [(if
                                                                                (<
                                                                                 (rsi
                                                                                  "QQQ"
                                                                                  {:window
                                                                                   10})
                                                                                 32.5)
                                                                                [(asset
                                                                                  "SHV"
                                                                                  "iShares Short Treasury Bond ETF")]
                                                                                [(asset
                                                                                  "PSQ"
                                                                                  "ProShares Short QQQ")])])])])])])])])])])])])])])])]
                                                  [(group
                                                    "Bear"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (current-price
                                                          "QQQ")
                                                         (moving-average-price
                                                          "QQQ"
                                                          {:window
                                                           25}))
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (cumulative-return
                                                              "QQQ"
                                                              {:window
                                                               10})
                                                             5)
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])]
                                                            [(asset
                                                              "QQQ"
                                                              nil)])])]
                                                        [(asset
                                                          "SHV"
                                                          "iShares Short Treasury Bond ETF")])])])])])])
                                             (group
                                              "LBT FTLT/Bull/Bonds with XLU/XLK RSI filter"
                                              [(weight-equal
                                                [(if
                                                  (<
                                                   (rsi
                                                    "XLU"
                                                    {:window 126})
                                                   (rsi
                                                    "XLK"
                                                    {:window 126}))
                                                  [(group
                                                    "Compares"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "AGG"
                                                          {:window 20})
                                                         (rsi
                                                          "SH"
                                                          {:window
                                                           60}))
                                                        [(weight-equal
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")])]
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (rsi
                                                              "AGG"
                                                              {:window
                                                               21})
                                                             (rsi
                                                              "SPY"
                                                              {:window
                                                               21}))
                                                            [(weight-equal
                                                              [(asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")])]
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])])])])])])]
                                                  [(weight-equal
                                                    [(if
                                                      (<
                                                       (rsi
                                                        "TLT"
                                                        {:window 126})
                                                       50)
                                                      [(group
                                                        "20/60"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (rsi
                                                              "AGG"
                                                              {:window
                                                               20})
                                                             (rsi
                                                              "SH"
                                                              {:window
                                                               60}))
                                                            [(weight-equal
                                                              [(asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")])]
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])])])])]
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (rsi
                                                            "QQQ"
                                                            {:window
                                                             10})
                                                           32.5)
                                                          [(asset
                                                            "SHV"
                                                            "iShares Short Treasury Bond ETF")]
                                                          [(asset
                                                            "PSQ"
                                                            "ProShares Short QQQ")])])])])])])])
                                             (group
                                              "20/60 Machine - with 200d MA macro filter"
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (current-price
                                                    "SPY")
                                                   (moving-average-price
                                                    "SPY"
                                                    {:window 200}))
                                                  [(group
                                                    "20/60"
                                                    [(weight-equal
                                                      [(if
                                                        (>
                                                         (rsi
                                                          "AGG"
                                                          {:window 20})
                                                         (rsi
                                                          "SH"
                                                          {:window
                                                           60}))
                                                        [(asset
                                                          "QQQ"
                                                          "Invesco QQQ Trust Series I")]
                                                        [(weight-equal
                                                          [(if
                                                            (<
                                                             (rsi
                                                              "QQQ"
                                                              {:window
                                                               10})
                                                             32.5)
                                                            [(asset
                                                              "SHV"
                                                              "iShares Short Treasury Bond ETF")]
                                                            [(asset
                                                              "PSQ"
                                                              "ProShares Short QQQ")])])])])])]
                                                  [(group
                                                    "Bear"
                                                    [(weight-equal
                                                      [(if
                                                        (<
                                                         (cumulative-return
                                                          "QQQ"
                                                          {:window 60})
                                                         -11)
                                                        [(group
                                                          "we're in a big drawdown of QQQ: BND vs QQQ"
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (rsi
                                                                "AGG"
                                                                {:window
                                                                 10})
                                                               (rsi
                                                                "QQQ"
                                                                {:window
                                                                 10}))
                                                              [(group
                                                                "QQQ"
                                                                [(weight-equal
                                                                  [(asset
                                                                    "QQQ"
                                                                    "Invesco QQQ Trust Series I")])])]
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(asset
                                                                    "SHV"
                                                                    "iShares Short Treasury Bond ETF")]
                                                                  [(asset
                                                                    "PSQ"
                                                                    "ProShares Short QQQ")])])])])])]
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "QQQ")
                                                             (moving-average-price
                                                              "QQQ"
                                                              {:window
                                                               20}))
                                                            [(weight-equal
                                                              [(group
                                                                "TLT vs PSQ"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (rsi
                                                                      "TLT"
                                                                      {:window
                                                                       21})
                                                                     (rsi
                                                                      "PSQ"
                                                                      {:window
                                                                       21}))
                                                                    [(group
                                                                      "QQQ"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "QQQ"
                                                                          "Invesco QQQ Trust Series I")])])]
                                                                    [(weight-equal
                                                                      [(if
                                                                        (<
                                                                         (rsi
                                                                          "QQQ"
                                                                          {:window
                                                                           10})
                                                                         32.5)
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")]
                                                                        [(asset
                                                                          "PSQ"
                                                                          "ProShares Short QQQ")])])])])])])]
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(asset
                                                                  "SHV"
                                                                  "iShares Short Treasury Bond ETF")]
                                                                [(asset
                                                                  "PSQ"
                                                                  "ProShares Short QQQ")])])])])])])])])])])
                                             (group
                                              "KMLM Variants"
                                              [(weight-equal
                                                [(group
                                                  "SPY vs KMLM -> 20d"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (rsi
                                                        "SPY"
                                                        {:window 10})
                                                       (rsi
                                                        "KMLM"
                                                        {:window 10}))
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")]
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (current-price
                                                            "KMLM")
                                                           (moving-average-price
                                                            "KMLM"
                                                            {:window
                                                             20}))
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")]
                                                          [(weight-equal
                                                            [(if
                                                              (<
                                                               (rsi
                                                                "QQQ"
                                                                {:window
                                                                 10})
                                                               32.5)
                                                              [(asset
                                                                "SHV"
                                                                "iShares Short Treasury Bond ETF")]
                                                              [(asset
                                                                "PSQ"
                                                                "ProShares Short QQQ")])])])])])])])
                                                 (group
                                                  "XLK vs KMLM -> 20d"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (rsi
                                                        "XLK"
                                                        {:window 10})
                                                       (rsi
                                                        "KMLM"
                                                        {:window 10}))
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")]
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (current-price
                                                            "KMLM")
                                                           (moving-average-price
                                                            "KMLM"
                                                            {:window
                                                             20}))
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")]
                                                          [(weight-equal
                                                            [(if
                                                              (<
                                                               (rsi
                                                                "QQQ"
                                                                {:window
                                                                 10})
                                                               32.5)
                                                              [(asset
                                                                "SHV"
                                                                "iShares Short Treasury Bond ETF")]
                                                              [(asset
                                                                "PSQ"
                                                                "ProShares Short QQQ")])])])])])])])
                                                 (group
                                                  "SMH vs KMLM -> 20d"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (rsi
                                                        "SMH"
                                                        {:window 10})
                                                       (rsi
                                                        "KMLM"
                                                        {:window 10}))
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")]
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (current-price
                                                            "KMLM")
                                                           (moving-average-price
                                                            "KMLM"
                                                            {:window
                                                             20}))
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")]
                                                          [(weight-equal
                                                            [(if
                                                              (<
                                                               (rsi
                                                                "QQQ"
                                                                {:window
                                                                 10})
                                                               32.5)
                                                              [(asset
                                                                "SHV"
                                                                "iShares Short Treasury Bond ETF")]
                                                              [(asset
                                                                "PSQ"
                                                                "ProShares Short QQQ")])])])])])])])
                                                 (group
                                                  "HYD vs KMLM"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (rsi
                                                        "HYD"
                                                        {:window 10})
                                                       (rsi
                                                        "KMLM"
                                                        {:window 10}))
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")]
                                                      [(weight-equal
                                                        [(if
                                                          (<
                                                           (rsi
                                                            "QQQ"
                                                            {:window
                                                             10})
                                                           32.5)
                                                          [(asset
                                                            "SHV"
                                                            "iShares Short Treasury Bond ETF")]
                                                          [(asset
                                                            "PSQ"
                                                            "ProShares Short QQQ")])])])])])])])
                                             (group
                                              "200d FDN vs 200d XLU | 2007-07-05"
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (rsi
                                                    "FDN"
                                                    {:window 200})
                                                   (rsi
                                                    "XLU"
                                                    {:window 200}))
                                                  [(asset
                                                    "QQQ"
                                                    "Invesco QQQ Trust Series I")]
                                                  [(weight-equal
                                                    [(group
                                                      "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "SPY")
                                                           (moving-average-price
                                                            "SPY"
                                                            {:window
                                                             200}))
                                                          [(weight-equal
                                                            [(group
                                                              "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                              [(weight-equal
                                                                [(if
                                                                  (>
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     10})
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     50}))
                                                                  [(asset
                                                                    "SHV"
                                                                    nil)]
                                                                  [(group
                                                                    "TLT isn't performing, how about Gold?"
                                                                    [(weight-equal
                                                                      [(if
                                                                        (>
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           20})
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           250}))
                                                                        [(asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")]
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])]
                                                          [(group
                                                            "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(group
                                                                  "ease up on the shorting as we're over sold"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])]
                                                                [(group
                                                                  "Cum. Returns deleted"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "PSQ"
                                                                      "ProShares Short QQQ")
                                                                     (asset
                                                                      "GLD"
                                                                      "SPDR Gold Shares")
                                                                     (asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])])])])])])])])])])])
                                             (group
                                              "VWO momentum"
                                              [(weight-equal
                                                [(group
                                                  "126d momentum vs VWO"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (cumulative-return
                                                        "VWO"
                                                        {:window 126})
                                                       (cumulative-return
                                                        "SHV"
                                                        {:window 126}))
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "VWO")
                                                           (moving-average-price
                                                            "VWO"
                                                            {:window
                                                             126}))
                                                          [(group
                                                            "bullish"
                                                            [(weight-equal
                                                              [(asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")])])]
                                                          [(group
                                                            " balanced"
                                                            [(weight-equal
                                                              [(asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")
                                                               (asset
                                                                "SHV"
                                                                nil)])])])])]
                                                      [(group
                                                        "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "SPY")
                                                             (moving-average-price
                                                              "SPY"
                                                              {:window
                                                               200}))
                                                            [(weight-equal
                                                              [(group
                                                                "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       10})
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       50}))
                                                                    [(asset
                                                                      "SHV"
                                                                      nil)]
                                                                    [(group
                                                                      "TLT isn't performing, how about Gold?"
                                                                      [(weight-equal
                                                                        [(if
                                                                          (>
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             20})
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             250}))
                                                                          [(asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")]
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])]
                                                            [(group
                                                              "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(group
                                                                    "ease up on the shorting as we're over sold"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])]
                                                                  [(group
                                                                    "Cum. Returns deleted"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "PSQ"
                                                                        "ProShares Short QQQ")
                                                                       (asset
                                                                        "GLD"
                                                                        "SPDR Gold Shares")
                                                                       (asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])])])])])])])])])])
                                                 (group
                                                  "63d momentum vs VWO"
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (cumulative-return
                                                        "VWO"
                                                        {:window 63})
                                                       (cumulative-return
                                                        "SHV"
                                                        {:window 63}))
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "VWO")
                                                           (moving-average-price
                                                            "VWO"
                                                            {:window
                                                             63}))
                                                          [(group
                                                            "bullish"
                                                            [(weight-equal
                                                              [(asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")])])]
                                                          [(group
                                                            " balanced"
                                                            [(weight-equal
                                                              [(asset
                                                                "QQQ"
                                                                "Invesco QQQ Trust Series I")
                                                               (asset
                                                                "SHV"
                                                                nil)])])])])]
                                                      [(group
                                                        "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                        [(weight-equal
                                                          [(if
                                                            (>
                                                             (current-price
                                                              "SPY")
                                                             (moving-average-price
                                                              "SPY"
                                                              {:window
                                                               200}))
                                                            [(weight-equal
                                                              [(group
                                                                "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                [(weight-equal
                                                                  [(if
                                                                    (>
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       10})
                                                                     (moving-average-price
                                                                      "TLT"
                                                                      {:window
                                                                       50}))
                                                                    [(asset
                                                                      "SHV"
                                                                      nil)]
                                                                    [(group
                                                                      "TLT isn't performing, how about Gold?"
                                                                      [(weight-equal
                                                                        [(if
                                                                          (>
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             20})
                                                                           (moving-average-price
                                                                            "GLD"
                                                                            {:window
                                                                             250}))
                                                                          [(asset
                                                                            "GLD"
                                                                            "SPDR Gold Shares")]
                                                                          [(asset
                                                                            "SHV"
                                                                            "iShares Short Treasury Bond ETF")])])])])])])])]
                                                            [(group
                                                              "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                              [(weight-equal
                                                                [(if
                                                                  (<
                                                                   (rsi
                                                                    "QQQ"
                                                                    {:window
                                                                     10})
                                                                   32.5)
                                                                  [(group
                                                                    "ease up on the shorting as we're over sold"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])]
                                                                  [(group
                                                                    "Cum. Returns deleted"
                                                                    [(weight-equal
                                                                      [(asset
                                                                        "PSQ"
                                                                        "ProShares Short QQQ")
                                                                       (asset
                                                                        "GLD"
                                                                        "SPDR Gold Shares")
                                                                       (asset
                                                                        "SHV"
                                                                        "iShares Short Treasury Bond ETF")])])])])])])])])])])])])])
                                             (group
                                              "60d BND vs 60d BIL "
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (cumulative-return
                                                    "BND"
                                                    {:window 60})
                                                   (cumulative-return
                                                    "SHV"
                                                    {:window 60}))
                                                  [(group
                                                    "bullish but balanced"
                                                    [(weight-equal
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")])])]
                                                  [(weight-equal
                                                    [(group
                                                      "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "SPY")
                                                           (moving-average-price
                                                            "SPY"
                                                            {:window
                                                             200}))
                                                          [(weight-equal
                                                            [(group
                                                              "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                              [(weight-equal
                                                                [(if
                                                                  (>
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     10})
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     50}))
                                                                  [(asset
                                                                    "SHV"
                                                                    nil)]
                                                                  [(group
                                                                    "TLT isn't performing, how about Gold?"
                                                                    [(weight-equal
                                                                      [(if
                                                                        (>
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           20})
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           250}))
                                                                        [(asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")]
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])]
                                                          [(group
                                                            "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(group
                                                                  "ease up on the shorting as we're over sold"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])]
                                                                [(group
                                                                  "Cum. Returns deleted"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "PSQ"
                                                                      "ProShares Short QQQ")
                                                                     (asset
                                                                      "GLD"
                                                                      "SPDR Gold Shares")
                                                                     (asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])])])])])])])])])])])
                                             (group
                                              "20/60 -> 10/20"
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (rsi
                                                    "AGG"
                                                    {:window 20})
                                                   (rsi
                                                    "SH"
                                                    {:window 60}))
                                                  [(group
                                                    "bullish but balanced"
                                                    [(weight-equal
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")])])]
                                                  [(weight-equal
                                                    [(if
                                                      (>
                                                       (rsi
                                                        "IEF"
                                                        {:window 10})
                                                       (rsi
                                                        "PSQ"
                                                        {:window 20}))
                                                      [(group
                                                        "bullish but balanced"
                                                        [(weight-equal
                                                          [(asset
                                                            "QQQ"
                                                            "Invesco QQQ Trust Series I")])])]
                                                      [(weight-equal
                                                        [(group
                                                          "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                          [(weight-equal
                                                            [(if
                                                              (>
                                                               (current-price
                                                                "SPY")
                                                               (moving-average-price
                                                                "SPY"
                                                                {:window
                                                                 200}))
                                                              [(weight-equal
                                                                [(group
                                                                  "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                                  [(weight-equal
                                                                    [(if
                                                                      (>
                                                                       (moving-average-price
                                                                        "TLT"
                                                                        {:window
                                                                         10})
                                                                       (moving-average-price
                                                                        "TLT"
                                                                        {:window
                                                                         50}))
                                                                      [(asset
                                                                        "SHV"
                                                                        nil)]
                                                                      [(group
                                                                        "TLT isn't performing, how about Gold?"
                                                                        [(weight-equal
                                                                          [(if
                                                                            (>
                                                                             (moving-average-price
                                                                              "GLD"
                                                                              {:window
                                                                               20})
                                                                             (moving-average-price
                                                                              "GLD"
                                                                              {:window
                                                                               250}))
                                                                            [(asset
                                                                              "GLD"
                                                                              "SPDR Gold Shares")]
                                                                            [(asset
                                                                              "SHV"
                                                                              "iShares Short Treasury Bond ETF")])])])])])])])]
                                                              [(group
                                                                "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                                [(weight-equal
                                                                  [(if
                                                                    (<
                                                                     (rsi
                                                                      "QQQ"
                                                                      {:window
                                                                       10})
                                                                     32.5)
                                                                    [(group
                                                                      "ease up on the shorting as we're over sold"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])]
                                                                    [(group
                                                                      "Cum. Returns deleted"
                                                                      [(weight-equal
                                                                        [(asset
                                                                          "PSQ"
                                                                          "ProShares Short QQQ")
                                                                         (asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")
                                                                         (asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])])])])])])])])
                                             (group
                                              "20d AGG vs 60d SH "
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (rsi
                                                    "AGG"
                                                    {:window 20})
                                                   (rsi
                                                    "SH"
                                                    {:window 60}))
                                                  [(group
                                                    "bullish but balanced"
                                                    [(weight-equal
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")])])]
                                                  [(weight-equal
                                                    [(group
                                                      "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "SPY")
                                                           (moving-average-price
                                                            "SPY"
                                                            {:window
                                                             200}))
                                                          [(weight-equal
                                                            [(group
                                                              "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                              [(weight-equal
                                                                [(if
                                                                  (>
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     10})
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     50}))
                                                                  [(asset
                                                                    "SHV"
                                                                    nil)]
                                                                  [(group
                                                                    "TLT isn't performing, how about Gold?"
                                                                    [(weight-equal
                                                                      [(if
                                                                        (>
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           20})
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           250}))
                                                                        [(asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")]
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])]
                                                          [(group
                                                            "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(group
                                                                  "ease up on the shorting as we're over sold"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])]
                                                                [(group
                                                                  "Cum. Returns deleted"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "PSQ"
                                                                      "ProShares Short QQQ")
                                                                     (asset
                                                                      "GLD"
                                                                      "SPDR Gold Shares")
                                                                     (asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])])])])])])])])])])])
                                             (group
                                              "20d TLT vs 20d PSQ "
                                              [(weight-equal
                                                [(if
                                                  (>
                                                   (rsi
                                                    "TLT"
                                                    {:window 20})
                                                   (rsi
                                                    "PSQ"
                                                    {:window 20}))
                                                  [(group
                                                    "bullish but balanced"
                                                    [(weight-equal
                                                      [(asset
                                                        "QQQ"
                                                        "Invesco QQQ Trust Series I")])])]
                                                  [(weight-equal
                                                    [(group
                                                      "We'll check for SPY momentum before going risk off, this is our secondary bullish check"
                                                      [(weight-equal
                                                        [(if
                                                          (>
                                                           (current-price
                                                            "SPY")
                                                           (moving-average-price
                                                            "SPY"
                                                            {:window
                                                             200}))
                                                          [(weight-equal
                                                            [(group
                                                              "Ok, still some momentum even though tech has weakened, maybe long duration treasuries are worth jumping into"
                                                              [(weight-equal
                                                                [(if
                                                                  (>
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     10})
                                                                   (moving-average-price
                                                                    "TLT"
                                                                    {:window
                                                                     50}))
                                                                  [(asset
                                                                    "SHV"
                                                                    nil)]
                                                                  [(group
                                                                    "TLT isn't performing, how about Gold?"
                                                                    [(weight-equal
                                                                      [(if
                                                                        (>
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           20})
                                                                         (moving-average-price
                                                                          "GLD"
                                                                          {:window
                                                                           250}))
                                                                        [(asset
                                                                          "GLD"
                                                                          "SPDR Gold Shares")]
                                                                        [(asset
                                                                          "SHV"
                                                                          "iShares Short Treasury Bond ETF")])])])])])])])]
                                                          [(group
                                                            "Risk OFF as neither bullish check has held.  Now try and short smartly"
                                                            [(weight-equal
                                                              [(if
                                                                (<
                                                                 (rsi
                                                                  "QQQ"
                                                                  {:window
                                                                   10})
                                                                 32.5)
                                                                [(group
                                                                  "ease up on the shorting as we're over sold"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])]
                                                                [(group
                                                                  "Cum. Returns deleted"
                                                                  [(weight-equal
                                                                    [(asset
                                                                      "PSQ"
                                                                      "ProShares Short QQQ")
                                                                     (asset
                                                                      "GLD"
                                                                      "SPDR Gold Shares")
                                                                     (asset
                                                                      "SHV"
                                                                      "iShares Short Treasury Bond ETF")])])])])])])])])])])])])])]))])])])])])])])])])])])])])])])]))])])]))
